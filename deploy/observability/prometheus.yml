global:
  scrape_interval: 15s
  evaluation_interval: 15s

rule_files:
  - /etc/prometheus/alerting/rules.yml

alerting:
  alertmanagers:
    - static_configs:
        - targets:
            - xin_alertmanager:9093

scrape_configs:
  - job_name: prometheus
    static_configs:
      - targets:
          - xin_prometheus:9090

  - job_name: xin-orchestrator
    metrics_path: /metrics
    static_configs:
      - targets: ["xin_orchestrator:8000"]
        labels:
          service: orchestrator

  - job_name: xin-channel-gateway
    metrics_path: /metrics
    static_configs:
      - targets: ["xin_channel_gateway:8080"]
        labels:
          service: channel_gateway

  - job_name: xin-ingestion-worker
    metrics_path: /metrics
    static_configs:
      - targets: ["xin_ingestion_worker:9103"]
        labels:
          service: ingestion_worker

  - job_name: xin-automation-worker
    metrics_path: /metrics
    static_configs:
      - targets: ["xin_automation_worker:9105"]
        labels:
          service: automation_worker

  - job_name: xin-frontend
    metrics_path: /metrics
    static_configs:
      - targets: ["xin_frontend:80"]
        labels:
          service: frontend

  - job_name: xin-tempo
    metrics_path: /metrics
    static_configs:
      - targets: ["xin_tempo:3200"]
        labels:
          service: tempo

  - job_name: xin-loki
    metrics_path: /metrics
    static_configs:
      - targets: ["xin_loki:3100"]
        labels:
          service: loki
