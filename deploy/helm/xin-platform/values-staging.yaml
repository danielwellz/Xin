orchestrator:
  replicaCount: 2
  image:
    tag: staging
  secretRefs:
    - xin-orchestrator-secrets

channelGateway:
  replicaCount: 2
  image:
    tag: staging
  secretRefs:
    - xin-channel-gateway-secrets

ingestionWorker:
  replicaCount: 2
  image:
    tag: staging
  secretRefs:
    - xin-ingestion-worker-secrets

automationWorker:
  secretRefs:
    - xin-automation-worker-secrets

externalSecrets:
  enabled: true
  refreshInterval: 1h
  secretStoreRef:
    name: xin-vault-kv
    kind: ClusterSecretStore
  items:
    - name: orchestrator-secrets
      target:
        name: xin-orchestrator-secrets
      data:
        - secretKey: POSTGRES_PASSWORD
          remoteRef:
            key: kv/data/xin/staging/orchestrator
            property: POSTGRES_PASSWORD
        - secretKey: OPENAI_API_KEY
          remoteRef:
            key: kv/data/xin/staging/orchestrator
            property: OPENAI_API_KEY
    - name: channel-gateway-secrets
      target:
        name: xin-channel-gateway-secrets
      data:
        - secretKey: GATEWAY_INSTAGRAM_TOKEN
          remoteRef:
            key: kv/data/xin/staging/channel-gateway
            property: INSTAGRAM_TOKEN
        - secretKey: GATEWAY_WHATSAPP_TOKEN
          remoteRef:
            key: kv/data/xin/staging/channel-gateway
            property: WHATSAPP_TOKEN
    - name: ingestion-worker-secrets
      target:
        name: xin-ingestion-worker-secrets
      dataFrom:
        - extract:
            key: kv/data/xin/staging/ingestion-worker
    - name: automation-worker-secrets
      target:
        name: xin-automation-worker-secrets
      dataFrom:
        - extract:
            key: kv/data/xin/staging/automation-worker
